
<div class="container-fluid justify-content-center postad">
  <h3 class="text-center">POST YOUR AD</h3>
  <div class="container">
    <mat-stepper >
      <mat-step [stepControl]="description" >
        <form [formGroup]="includeDetails">
          <ng-template matStepLabel>Include Vehicle Details</ng-template>
          <p-treeSelect matInput class="w-full md:w-30rem" containerStyleClass="w-full" formControlName="brand"
            [options]="nodes" [metaKeySelection]="false" [(ngModel)]="selectedNodes" placeholder="Brand"></p-treeSelect>
          <mat-form-field [style.width.px]=327>
            <mat-label>Year </mat-label>
            <input matInput type="number" formControlName="year" id="floatingInput"
              placeholder="Year of Manufacturing" />
          </mat-form-field>
          <mat-form-field>
            <mat-label>Km Driven</mat-label>
            <input matInput type="number" id="floatingInput" formControlName="kmdriven" placeholder="Total Km Driven" />
          </mat-form-field>
          <mat-form-field>
            <mat-label>Ad Title</mat-label>
            <input matInput type="text" id="floatingInput" formControlName="adtitle"
              placeholder="Type the Ad title you wish to give" />
          </mat-form-field>
          <mat-form-field>
            <mat-label>Description</mat-label>
            <textarea matInput name="" id="" cols="30" placeholder="Detailed Description of Your Vehicle"
              formControlName="description" rows="3"></textarea>
          </mat-form-field>
          <div>
            <button class="btn btn-primary" mat-button matStepperNext>Next</button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="price" label="Set Price">
        <form [formGroup]="setPrice">
          <mat-form-field>
            <mat-label>Set Price</mat-label>
            <input matInput type="number" id="floatingInput" formControlName="price"
              placeholder="Set a price for your vehicle" />
          </mat-form-field>
          <div>
            <button class="btn btn-primary me-3" mat-button matStepperPrevious>Back</button>
            <button class="btn btn-primary ps-3" mat-button matStepperNext>Next</button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="finalize" label="Choose Image">
        <form [formGroup]="finalize">
          <mat-form-field>
            <mat-label>Upload Image</mat-label>
            <input matInput type="text" readonly formControlName="imagelink" id="floatingInput"
              placeholder="Upload Your vehicle photo" />
          </mat-form-field>
          <div>
            <button class="btn btn-primary" (click)="getImage()" data-bs-toggle="modal" data-bs-target="#chooseVehicle">
              Select
            </button>

          </div>
          <mat-form-field>
            <mat-label>Choose Location</mat-label>
            
            <mat-select  formControlName="city">
              <mat-option *ngFor="let city of cityList" [value]="city.city">
                {{city.city}}
              </mat-option>
            </mat-select>
          </mat-form-field>

        </form>

        <form [formGroup]="postAdForm" (ngSubmit)="postAdForm.valid && onSubmission(postAdForm.value)">
          <button class="btn btn-primary mt-3" type="submit">Post</button>
        </form>
      </mat-step>
    </mat-stepper>


  </div>
</div>

<div class="modal fade" id="chooseVehicle" tabindex="-1" aria-labelledby="chooseVehicleModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="chooseVehicleModal">
          Click the Image to Choose
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

        <img *ngFor="let img of bikeList" (click)="setimageLink(img) "
        height="100px"
        width="100px"
        src={{img.largeImageURL}}
        data-bs-dismiss="modal"
        >
         
          
          
      </div>
      
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>